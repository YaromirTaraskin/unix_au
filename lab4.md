# Лабораторная работа №4. 
## Разграничение прав доступа в ОС UNIX. Управление правами доступа к файлам и каталогам

### Основные понятия:

+	права доступа к объекту (файлу или каталогу)
+	владелец объекта (файла или каталога) 
+	группа-владелец объекта (файла или каталога)
+	права на чтение, запись и исполнение объекта (файла или каталога)

### Используемые команды:

+ `chmod`	изменение прав доступа к объекту
+ `chown`	изменение владельца объекта
+ `chgrp`	изменение группы-владельца объекта
+ `umask`	изменение шаблона прав доступа для новых файлов и каталогов

### Задание 1.

> 1. Создайте в своем домашнем каталоге подкаталог 'labs'.

```bash
mkdir -v labs
```

> 2. Запустите следующую команду, чтобы создать группу файлов, которыми необходимо распорядиться:
>> `[user@station ~]$ touch labs/lab{1,2,3,4}.{draft,final}.{txt,pdf}`

> Если вы правильно ввели команду, у вас появится следующие файлы:
>> `[user@station ~]$ ls labs/`
>> `lab1.draft.pdf lab2.draft.pdf lab3.draft.pdf lab4.draft.pdf lab1.draft.txt lab2.draft.txt lab3.draft.txt lab4.draft.txt lab1.final.pdf lab2.final.pdf lab3.final.pdf lab4.final.pdf lab1.final.txt lab2.final.txt lab3.final.txt lab4.final.txt`

```bash
touch labs/lab{1,2,3,4}.{draft,final}.{txt,pdf}
```

> 3. Задайте права доступа к вашему домашнему каталогу так, чтобы другие пользователи могли получить доступ к подкаталогу `labs`, но не могли просматривать список файлов в домашнем каталоге.

```bash
chmod -v o+rwx labs
chmod -v o-r ~
```

> 4. Убедитесь, что другие пользователи могут получить доступ и посмотреть список файлов в каталоге `labs`. Для этого попросите другого пользователя попробовать открыть ваш каталог.

> 5. Члены вашей группы должны будут помочь вам с выполнением лабораторных работ. Создайте каталог `~/labs/draft` и выдайте вашей группе права доступа к этому каталогу так, чтобы любой мог просмотреть список содержимого каталога, но только студенты вашей группы могли создать новые файлы. Переместите все обычные файлы, которые содержат слово «`draft`» в своем названии, в ваш вновь созданный каталог и замените группу-владельца файла на вашу группу.

```bash
mkdir -v –mode=774 -p ~/labs/draft
mv ~/labs/*draft* -t ~/labs/draft -v
chgrp -R mygroup ~/labs/draft 
```

> 6. За итоговый вариант файлов с выполненными лабораторными работами отвечаете вы. Создайте каталог `~/labs/final`. Вы не хотите, чтобы кто-то мог изменять вашу работу, поэтому установите такие права доступа, чтобы только вы имели доступ к каталогу на запись. Вы должны иметь полный доступ к этому каталогу, а все другие студенты вашей группы должны иметь возможность просматривать файлы этого каталога. Переместите все обычные файлы, которые содержат в своем названии слово «`final`», во вновь созданный каталог.

```bash
mkdir -v --mode=755 -p ~/labs/final
mv ~/labs/*final* -t ~/labs/final -v
```

> 7. Работа над первой лабораторной работой закончилась, поэтому позаботьтесь о том, чтобы вы случайно не удалили файл `lab1.final.pdf` и `lab1.final.txt` из каталога `final`.

```bash
chmod -v u-w  ~/labs/final/lab1.final.*
```

> 8. Вы хотите иметь место, где можно записывать свои планы по выполнению будущих работ, вы не хотите, чтобы кто-либо увидел ваши мысли. Создайте каталог `~/labs/planning`, и установите такие права доступа, чтобы вы имели полный доступ, а все остальные не имели доступа вообще.

```bash
mkdir -v --mode=700 -p ~/labs/planning
```

> 9. Вы заинтересованы в том, чтобы получать от любых людей подсказки по выполнению работ, но вы хотели бы, чтобы этот процесс был анонимным. Создайте каталог `~/labs/submissions` и установите такие прав доступа, чтобы любой человек мог создавать новые файлы, но только вы могли видеть список содержимого каталога.
> Проверьте, что все работает, попросив соседа создать новый файл в вашем каталоге с именем `~/labs/submissions/suggestion.txt`.

```bash
mkdir -v --mode=722 -p ~/labs/submissions
```

> 10. На всякий случай скопируйте команду `/bin/ls` как файл `~/labs/ls`. Поскольку вы не хотите, чтобы кто-то запустил этот исполняемый файл, удалите все права доступа на выполнение.

```bash
echo "bin/ls" > ls
chmod -v -x ls
```

> 11. Поскольку другие люди будут пользоваться этим каталогом, вы слегка обеспокоены по поводу новых файлов, которые вы будете создавать. Добавьте подходящую команду в конец вашего файла `~/.bashrc`, так чтобы `umask` вашей оболочки автоматически был установлен на `077` при запуске.

```bash
echo “umask 077” >> ~/.bashrc
```
